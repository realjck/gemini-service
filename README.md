# gemini-service

This project provides a secure Python backend using Flask and Gunicorn to interact with the Google Gemini API. It's designed to be deployed as an API service, allowing your frontend applications to communicate with Gemini without directly exposing your API key.

## Installation

### Build image :

```bash
docker build -t gemini-service .
```


### Run container :

```bash
docker run -d --restart always -p 2222:5000 --name gemini-service-container \
  -e GOOGLE_API_KEY="YOUR-API-KEY" \
  -e GEMINI_MODEL_TYPE="gemini-2.5-flash-preview-04-17" \
  -e CORS_ORIGIN="https://your-domain.com" \
  gemini-service
```

- Personnalize with the GEMINI_MODEL_TYPE you want to use.
- CORS_ORIGIN is optional, if not specified it will allow all origins (*)



## /

- **Purpose**: Health check endpoint.

- **Description**: Returns a simple JSON response indicating the backend service is running and healthy.

- **Response**: {"status": "healthy", "message": "Gemini API backend running"}


## /generate_text

This endpoint allows users to generate text based on a given prompt.

### Request

- **Method**: POST  
    

#### Request Body

The request body must be in JSON format and should contain the following key:

- **prompt** (string): This is the input text that guides the text generation process. Users should provide a clear and concise prompt to receive relevant output.
    

**Example Request Body**:

``` json
{
  "prompt": "Write poetry. Build your response in JSON format like this : {'poem':'...'}"
}

 ```

### Response

The response will be in JSON format and will typically include the generated text based on the provided prompt. The structure of the response may vary depending on the complexity of the prompt and the generated content.

**Expected Response Structure**:

``` json
{
  "generated_text": "{\n  \"poem\": \"In hues of dusk, the world descends,\\nA canvas soft, where daylight ends.\\nA single star begins to gleam,\\nA whispered thought, a fading dream.\\n\\nThe wind sighs low through sleeping trees,\\nCarrying scents on gentle breeze.\\nThe crickets hum a nightly tune,\\nBeneath the gaze of silver moon.\"\n}"
}

 ```

- **generated_text** (string): This field contains the text generated by the API in response to the provided prompt.
    

### Summary

When making a request to this endpoint, ensure that the prompt is well-defined to achieve the best results. The API will return a JSON object containing the generated text, which can be utilized in various applications.



## /upload

This endpoint allows users to upload files to the server. The request must be made using the HTTP POST method, and the file should be sent as form-data.

### Request Parameters

- **file**: (type: file)  
    This parameter is used to upload the file. The file should be included in the request body as form-data.
    

### Expected Response

Upon a successful file upload, the server will respond with a confirmation message indicating that the file has been successfully uploaded.

### Notes

- Ensure that the file being uploaded meets any size and type restrictions that may be enforced by the server.
    



## /chat

This endpoint allows users to send a message to the chat service.

### Request

- **Method**: POST
    

#### Request Body

The request body must be in JSON format and should contain the following parameter:

- `message` (string): The text message that the user wants to send to the chat service. This message will be processed to generate a response.
    

### Response

```json

{
    "success": true
}
```

### Notes

- Ensure that the `message` parameter is properly formatted and does not exceed any character limits imposed by the service.



## /stream

- Purpose: Stream the Gemini API's response.

- Description: Initiates a Server-Sent Events (SSE) stream to provide real-time responses from the Gemini API. It uses the last text message from /chat and/or the last uploaded image from /upload. This endpoint maintains the chat session history.

### Request

- **Method**: GET
    

### Response

Upon a successful request (HTTP Status 200), the response will be in the format of a text/event-stream.